MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00001     list p=16f877                 ; list directive to define processor
                      00002       #include <p16f877.inc>        ; processor specific variable definitions
                      00001         LIST
                      00002 
                      00003 ;==========================================================================
                      00004 ;  MPASM PIC16F877 processor include
                      00005 ; 
                      00006 ;  (c) Copyright 1999-2013 Microchip Technology, All rights reserved
                      00007 ;==========================================================================
                      00008 
                      00540         LIST
2007   3F72           00003       __CONFIG _CP_OFF & _WDT_OFF & _BODEN_ON & _PWRTE_ON & _HS_OSC & _WRT_ENABLE_ON & _CPD_OFF & _LVP_O
                            FF
                      00004 
                      00005 
                      00006 ;***************************************
                      00007 ; VARIABLES
                      00008 ;***************************************
                      00009     cblock      0x20
                      00010         ; for use in code
  00000020            00011         keytemp
  00000021            00012         statustemp
  00000022            00013                 Table_Counter
  00000023            00014                 com
  00000024            00015                 dat
  00000025            00016         lcd_d1
  00000026            00017         lcd_d2
  00000027            00018         COUNTH
  00000028            00019         COUNTM
  00000029            00020         COUNTL
  0000002A            00021         op_time_save
  0000002B            00022         huns
  0000002C            00023         tens
  0000002D            00024         ones
  0000002E            00025         count
                      00026         ; values to display (generated by main machine code)
  0000002F            00027         op_time     ;in seconds
  00000030            00028         status1     ;where   0 = none      1 = pass
  00000031            00029         status2     ;        2 = led fail  3 = flicker fail
  00000032            00030         status3
  00000033            00031         status4
  00000034            00032         status5
  00000035            00033         status6
  00000036            00034         status7
  00000037            00035         status8
  00000038            00036         status9
  00000039            00037         num_def
  0000003A            00038         num_tot
                      00039         
                      00040         endc
                      00041 
                      00042 
                      00043 ;***************************************
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00044 ; DEFINITIONS
                      00045 ;***************************************
                      00046     #define     RS      PORTD,2
                      00047         #define E       PORTD,3
                      00048 
                      00049 
                      00050 ;***************************************
                      00051 ; MACROS
                      00052 ;***************************************
                      00053 LCD_DELAY macro
                      00054         movlw   0xFF
                      00055         movwf   lcd_d1
                      00056         decfsz  lcd_d1,f
                      00057         goto    $-1
                      00058         endm
                      00059 
                      00060 Display macro   Message
                      00061                 local   loop_
                      00062                 local   end_
                      00063                 clrf    Table_Counter
                      00064                 clrw
                      00065 loop_   movf    Table_Counter,W
                      00066                 call    Message
                      00067                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
                      00068                 btfsc   STATUS,Z
                      00069                 goto    end_
                      00070                 call    WR_DATA
                      00071                 incf    Table_Counter,F
                      00072                 goto    loop_
                      00073 end_
                      00074                 endm
                      00075 
                      00076 movlf   macro   l, f
                      00077         movlw   l
                      00078         movwf   f
                      00079         endm
                      00080 
                      00081 movff   macro   source, dest
                      00082         movf    source, W
                      00083         movwf   dest
                      00084         endm
                      00085 
                      00086 writenum    macro   number
                      00087             movlw    number
                      00088             addlw   B'00110000'
                      00089             movwf   dat
                      00090             call WR_DATA
                      00091             endm
                      00092 
                      00093 writenum_reg    macro   reg
                      00094             movfw    reg
                      00095             addlw   B'00110000'
                      00096             movwf   dat
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00097             call WR_DATA
                      00098             endm
                      00099 
                      00100 
                      00101 ;***************************************
                      00102 ; VECTORS
                      00103 ;***************************************
                      00104 
                      00105     ORG       0x0000             ;RESET vector must always be at 0x00
0000   2???           00106          goto      init          ;Just jump to the main code section.
                      00107 
                      00108 
                      00109 ;***************************************
                      00110 ; LOOK UP TABLE (MESSAGES)
                      00111 ;***************************************
0001                  00112 Standby_Msg
0001   0782           00113                 addwf   PCL,F
0002   3453 3454 3441 00114                 dt              "STANDBY", 0
       344E 3444 3442 
       3459 3400 
000A                  00115 Start_Msg
000A   0782           00116         addwf   PCL,F
000B   3449 346E 3473 00117         dt      "Inspecting . . .",0
       3470 3465 3463 
       3474 3469 346E 
       3467 3420 342E 
       3420 342E 3420 
       342E 3400 
001C                  00118 End_Msg
001C   0782           00119         addwf   PCL,F
001D   3443 346F 346D 00120         dt      "Complete",0
       3470 346C 3465 
       3474 3465 3400 
0026                  00121 Time_Msg
0026   0782           00122                 addwf   PCL,F
0027   344F 3470 3465 00123                 dt              "Operation time:",0
       3472 3461 3474 
       3469 346F 346E 
       3420 3474 3469 
       346D 3465 343A 
       3400 
0037                  00124 Seconds
0037   0782           00125         addwf   PCL,F
0038   3420 3473 3465 00126         dt      " seconds", 0
       3463 346F 346E 
       3464 3473 3400 
0041                  00127 Not_present
0041   0782           00128         addwf   PCL,F
0042   343A 3420 346E 00129         dt      ": not present",0
       346F 3474 3420 
       3470 3472 3465 
       3473 3465 346E 
       3474 3400 
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0050                  00130 Pass
0050   0782           00131                 addwf   PCL,F
0051   343A 3420 3470 00132                 dt              ": pass",0
       3461 3473 3473 
       3400 
0058                  00133 LED_fail
0058   0782           00134                 addwf   PCL,F
0059   343A 3420 344C 00135                 dt              ": LED fail",0
       3445 3444 3420 
       3466 3461 3469 
       346C 3400 
0064                  00136 Flick_fail
0064   0782           00137                 addwf   PCL,F
0065   343A 3420 3466 00138                 dt              ": flicker fail",0
       346C 3469 3463 
       346B 3465 3472 
       3420 3466 3461 
       3469 346C 3400 
0074                  00139 Total_Msg
0074   0782           00140         addwf   PCL,F
0075   3454 346F 3474 00141         dt      "Total candles: ",0
       3461 346C 3420 
       3463 3461 346E 
       3464 346C 3465 
       3473 343A 3420 
       3400 
0085                  00142 Defective
0085   0782           00143         addwf   PCL,F
0086   3444 3465 3466 00144         dt      "Defective: ",0
       3465 3463 3474 
       3469 3476 3465 
       343A 3420 3400 
0092                  00145 None
0092   0782           00146         addwf   PCL,F
0093   3420 3420 3420 00147         dt      "      none", 0
       3420 3420 3420 
       346E 346F 346E 
       3465 3400 
009E                  00148 Spacebar
009E   0782           00149         addwf   PCL,F
009F   3420 3400      00150         dt      " ",0
                      00151 
                      00152 ;***************************************
                      00153 ; MAIN PROGRAM
                      00154 ;***************************************
                      00155 
00A1                  00156 init
00A1   018B           00157          clrf      INTCON         ; No interrupts
                      00158 
00A2   1683           00159          bsf       STATUS,RP0     ; select bank 1
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A3   0185           00160          clrf      TRISA          ; All port A is output
00A4   30F2           00161          movlw     b'11110010'    ; Set required keypad inputs
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A5   0086           00162          movwf     TRISB
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A6   0187           00163          clrf      TRISC          ; All port C is output
Message[302]: Register in operand not in bank 0.  Ensure that bank bits are correct.
00A7   0188           00164          clrf      TRISD          ; All port D is output
                      00165 
00A8   1283           00166          bcf       STATUS,RP0     ; select bank 0
00A9   0185           00167          clrf      PORTA
00AA   0186           00168          clrf      PORTB
00AB   0187           00169          clrf      PORTC
00AC   0188           00170          clrf      PORTD
                      00171 
00AD   2???           00172          call      InitLCD    ;Initialize the LCD
                      00173          Display   Standby_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
00AE   01A2               M                 clrf    Table_Counter
00AF   0103               M                 clrw
00B0   0822               M loop_   movf    Table_Counter,W
00B1   2???               M                 call    Standby_Msg
00B2   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
00B3   1903               M                 btfsc   STATUS,Z
00B4   2???               M                 goto    end_
00B5   2???               M                 call    WR_DATA
00B6   0AA2               M                 incf    Table_Counter,F
00B7   2???               M                 goto    loop_
00B8                      M end_
                      00174 
00B8   1C86           00175 waiting  btfss          PORTB,1     ;Wait until data is available from the keypad
00B9   2???           00176          goto           $-1
                      00177 
00BA   0E06           00178          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
00BB   390F           00179          andlw          0x0F
00BC   3A0D           00180          xorlw      0xD         ;will be all zeros if its "START:
00BD   1903           00181          btfsc      STATUS,Z    ;and Z will be high, so skip if not high
00BE   2???           00182          goto       start
                      00183 
00BF   1886           00184          btfsc          PORTB,1     ;Wait until key is released
00C0   2???           00185          goto           $-1
00C1   2???           00186          goto       waiting
                      00187 
                      00188 ;--------------------------------------
                      00189 ;       ACTUAL OPERATION (im just adding values manually now)
                      00190 
00C2                  00191 start
00C2   2???           00192         call        Clear_Display
                      00193         Display     Start_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
00C3   01A2               M                 clrf    Table_Counter
00C4   0103               M                 clrw
00C5   0822               M loop_   movf    Table_Counter,W
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00C6   2???               M                 call    Start_Msg
00C7   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
00C8   1903               M                 btfsc   STATUS,Z
00C9   2???               M                 goto    end_
00CA   2???               M                 call    WR_DATA
00CB   0AA2               M                 incf    Table_Counter,F
00CC   2???               M                 goto    loop_
00CD                      M end_
                      00194 
                      00195 ; just shitting around
00CD   2???           00196         call    HalfS
00CE   2???           00197         call Clear_Display
                      00198         writenum    0x5
00CF   3005               M             movlw    0x5
00D0   3E30               M             addlw   B'00110000'
00D1   00A4               M             movwf   dat
00D2   2???               M             call WR_DATA
00D3   2???           00199         call    HalfS
00D4   2???           00200         call Clear_Display
                      00201         writenum    0x4
00D5   3004               M             movlw    0x4
00D6   3E30               M             addlw   B'00110000'
00D7   00A4               M             movwf   dat
00D8   2???               M             call WR_DATA
00D9   2???           00202         call    HalfS
00DA   2???           00203         call Clear_Display
                      00204         writenum    0x3
00DB   3003               M             movlw    0x3
00DC   3E30               M             addlw   B'00110000'
00DD   00A4               M             movwf   dat
00DE   2???               M             call WR_DATA
00DF   2???           00205         call    HalfS
00E0   2???           00206         call Clear_Display
                      00207         writenum    0x2
00E1   3002               M             movlw    0x2
00E2   3E30               M             addlw   B'00110000'
00E3   00A4               M             movwf   dat
00E4   2???               M             call WR_DATA
00E5   2???           00208         call    HalfS
00E6   2???           00209         call Clear_Display
                      00210         writenum    0x1
00E7   3001               M             movlw    0x1
00E8   3E30               M             addlw   B'00110000'
00E9   00A4               M             movwf   dat
00EA   2???               M             call WR_DATA
00EB   2???           00211         call    HalfS
                      00212 
                      00213 ; Putting values in manually. This will be done automatically in main program
                      00214          movlf     D'5', op_time
00EC   3005               M         movlw   D'5'
00ED   00AF               M         movwf   op_time
                      00215          movlf     B'00', status1
00EE   3000               M         movlw   B'00'
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

00EF   00B0               M         movwf   status1
                      00216          movlf     B'01', status2
00F0   3001               M         movlw   B'01'
00F1   00B1               M         movwf   status2
                      00217          movlf     B'10', status3
00F2   3002               M         movlw   B'10'
00F3   00B2               M         movwf   status3
                      00218          movlf     B'11', status4
00F4   3003               M         movlw   B'11'
00F5   00B3               M         movwf   status4
                      00219          movlf     B'01', status5
00F6   3001               M         movlw   B'01'
00F7   00B4               M         movwf   status5
                      00220          movlf     B'01', status6
00F8   3001               M         movlw   B'01'
00F9   00B5               M         movwf   status6
                      00221          movlf     B'01', status7
00FA   3001               M         movlw   B'01'
00FB   00B6               M         movwf   status7
                      00222          movlf     B'11', status8
00FC   3003               M         movlw   B'11'
00FD   00B7               M         movwf   status8
                      00223          movlf     B'00', status9
00FE   3000               M         movlw   B'00'
00FF   00B8               M         movwf   status9
                      00224          movlf     D'3', num_def
0100   3003               M         movlw   D'3'
0101   00B9               M         movwf   num_def
                      00225          movlf     D'7', num_tot
0102   3007               M         movlw   D'7'
0103   00BA               M         movwf   num_tot
                      00226 
                      00227 
0104   2???           00228         call        Clear_Display
                      00229         Display    End_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
0105   01A2               M                 clrf    Table_Counter
0106   0103               M                 clrw
0107   0822               M loop_   movf    Table_Counter,W
0108   2???               M                 call    End_Msg
0109   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
010A   1903               M                 btfsc   STATUS,Z
010B   2???               M                 goto    end_
010C   2???               M                 call    WR_DATA
010D   0AA2               M                 incf    Table_Counter,F
010E   2???               M                 goto    loop_
010F                      M end_
010F   2???           00230         call    HalfS
0110   2???           00231         call    time
0111   2???           00232         call    HalfS
0112   2???           00233         call    HalfS
0113   2???           00234         call    summary
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0114   2???           00235         call    HalfS
0115   2???           00236         call    HalfS
0116   2???           00237         call    defective
                      00238 ;-----------------------------------------------------------------------
                      00239 
                      00240 ; Data display interface
                      00241 
0117   1C86           00242 poll     btfss          PORTB,1     ;Wait until data is available from the keypad
0118   2???           00243          goto           $-1
                      00244 
0119   0E06           00245          swapf          PORTB,W     ;Read PortB<7:4> into W<3:0>
011A   390F           00246          andlw          0x0F
011B   2???           00247          call       information
                      00248 
011C   1886           00249          btfsc          PORTB,1     ;Wait until key is released
011D   2???           00250          goto           $-1
011E   2???           00251          goto       poll
                      00252 
                      00253 ;-------------------------------------------------------------------------
                      00254 
                      00255 
                      00256 
                      00257 ;***************************************
                      00258 ; KEY SELECTOR ROUTINE (written by me)
                      00259 ;***************************************
011F                  00260 information
011F   00A0           00261     movwf   keytemp             ; save value of W in msgtemp
                      00262 
0120                  00263 check_1
0120   3A00           00264     xorlw   0x0         ;will be all zeros if its 1
0121   1D03           00265     btfss   STATUS,Z    ;and Z will be high, so skip 
0122   2???           00266     goto check_2
0123   2???           00267     call Clear_Display
                      00268     writenum 0x1
0124   3001               M             movlw    0x1
0125   3E30               M             addlw   B'00110000'
0126   00A4               M             movwf   dat
0127   2???               M             call WR_DATA
0128   0830           00269     movf status1, W
0129   2???           00270     call display_status
012A   0008           00271     return
                      00272 
012B                  00273 check_2
012B   0820           00274     movf    keytemp, W
012C   3A01           00275     xorlw   0x1         
012D   1D03           00276     btfss   STATUS,Z    
012E   2???           00277     goto check_3
012F   2???           00278     call Clear_Display
                      00279     writenum 0x2
0130   3002               M             movlw    0x2
0131   3E30               M             addlw   B'00110000'
0132   00A4               M             movwf   dat
0133   2???               M             call WR_DATA
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0134   0831           00280     movf status2, W
0135   2???           00281     call display_status
0136   0008           00282     return
                      00283 
0137                  00284 check_3
0137   0820           00285     movf    keytemp, W
0138   3A02           00286     xorlw   0x2
0139   1D03           00287     btfss   STATUS,Z
013A   2???           00288     goto check_4
013B   2???           00289     call Clear_Display
                      00290     writenum 0x3
013C   3003               M             movlw    0x3
013D   3E30               M             addlw   B'00110000'
013E   00A4               M             movwf   dat
013F   2???               M             call WR_DATA
0140   0832           00291     movf status3, W
0141   2???           00292     call display_status
0142   0008           00293     return
                      00294 
0143                  00295 check_4
0143   0820           00296     movf    keytemp, W
0144   3A04           00297     xorlw   0x4
0145   1D03           00298     btfss   STATUS,Z
0146   2???           00299     goto check_5
0147   2???           00300     call Clear_Display
                      00301     writenum 0x4
0148   3004               M             movlw    0x4
0149   3E30               M             addlw   B'00110000'
014A   00A4               M             movwf   dat
014B   2???               M             call WR_DATA
014C   0833           00302     movf status4, W
014D   2???           00303     call display_status
014E   0008           00304     return
                      00305 
014F                  00306 check_5
014F   0820           00307     movf    keytemp, W
0150   3A05           00308     xorlw   0x5
0151   1D03           00309     btfss   STATUS,Z
0152   2???           00310     goto check_6
0153   2???           00311     call Clear_Display
                      00312     writenum 0x5
0154   3005               M             movlw    0x5
0155   3E30               M             addlw   B'00110000'
0156   00A4               M             movwf   dat
0157   2???               M             call WR_DATA
0158   0834           00313     movf status5, W
0159   2???           00314     call display_status
015A   0008           00315     return
                      00316 
015B                  00317 check_6
015B   0820           00318     movf    keytemp, W
015C   3A06           00319     xorlw   0x6
015D   1D03           00320     btfss   STATUS,Z
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

015E   2???           00321     goto check_7
015F   2???           00322     call Clear_Display
                      00323     writenum 0x6
0160   3006               M             movlw    0x6
0161   3E30               M             addlw   B'00110000'
0162   00A4               M             movwf   dat
0163   2???               M             call WR_DATA
0164   0835           00324     movf status6, W
0165   2???           00325     call display_status
0166   0008           00326     return
                      00327 
0167                  00328 check_7
0167   0820           00329     movf    keytemp, W
0168   3A08           00330     xorlw   0x8
0169   1D03           00331     btfss   STATUS,Z
016A   2???           00332     goto check_8
016B   2???           00333     call Clear_Display
                      00334     writenum 0x7
016C   3007               M             movlw    0x7
016D   3E30               M             addlw   B'00110000'
016E   00A4               M             movwf   dat
016F   2???               M             call WR_DATA
0170   0836           00335     movf status7, W
0171   2???           00336     call display_status
0172   0008           00337     return
                      00338 
0173                  00339 check_8
0173   0820           00340     movf    keytemp, W
0174   3A09           00341     xorlw   0x9
0175   1D03           00342     btfss   STATUS,Z
0176   2???           00343     goto check_9
0177   2???           00344     call Clear_Display
                      00345     writenum 0x8
0178   3008               M             movlw    0x8
0179   3E30               M             addlw   B'00110000'
017A   00A4               M             movwf   dat
017B   2???               M             call WR_DATA
017C   0837           00346     movf status8, W
017D   2???           00347     call display_status
017E   0008           00348     return
                      00349 
017F                  00350 check_9
017F   0820           00351     movf    keytemp, W
0180   3A0A           00352     xorlw   0xA
0181   1D03           00353     btfss   STATUS,Z
0182   2???           00354     goto check_summary
0183   2???           00355     call Clear_Display
                      00356     writenum 0x9
0184   3009               M             movlw    0x9
0185   3E30               M             addlw   B'00110000'
0186   00A4               M             movwf   dat
0187   2???               M             call WR_DATA
0188   0838           00357     movf status9, W
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 11


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0189   2???           00358     call display_status
018A   0008           00359     return
                      00360 
018B                  00361 check_summary           
018B   0820           00362     movf    keytemp, W
018C   3A03           00363     xorlw   0x3
018D   1D03           00364     btfss   STATUS,Z
018E   2???           00365     goto check_defective
018F   2???           00366     call    summary
0190   0008           00367     return
                      00368 
0191                  00369 check_defective
0191   0820           00370     movf    keytemp, W
0192   3A07           00371     xorlw   0x7
0193   1D03           00372     btfss   STATUS,Z
0194   2???           00373     goto check_time
0195   2???           00374     call defective
0196   0008           00375     return
                      00376 
0197                  00377 check_time
0197   0820           00378     movf    keytemp, W
0198   3A0B           00379     xorlw   0xB
0199   1D03           00380     btfss   STATUS,Z
019A   2???           00381     goto check_start
019B   2???           00382     call    time
019C   0008           00383     return
                      00384 
019D                  00385 check_start
019D   0820           00386     movf    keytemp, W
019E   3A0D           00387     xorlw   0xD
019F   1D03           00388     btfss   STATUS,Z
01A0   2???           00389     goto check_standby
01A1   2???           00390     goto start
                      00391 
01A2                  00392 check_standby
01A2   0820           00393     movf    keytemp, W
01A3   3A0E           00394     xorlw   0xE
01A4   1D03           00395     btfss   STATUS,Z
01A5   2???           00396     goto    default_key
01A6   2???           00397     goto    init
                      00398 
01A7                  00399 default_key
01A7   0008           00400     return
                      00401 
                      00402 
                      00403 ; Summary Subroutine
01A8                  00404 summary
01A8   2???           00405     call            Clear_Display
                      00406     Display         Total_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
01A9   01A2               M                 clrf    Table_Counter
01AA   0103               M                 clrw
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01AB   0822               M loop_   movf    Table_Counter,W
01AC   2???               M                 call    Total_Msg
01AD   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01AE   1903               M                 btfsc   STATUS,Z
01AF   2???               M                 goto    end_
01B0   2???               M                 call    WR_DATA
01B1   0AA2               M                 incf    Table_Counter,F
01B2   2???               M                 goto    loop_
01B3                      M end_
                      00407     writenum_reg    num_tot
01B3   083A               M             movfw    num_tot
01B4   3E30               M             addlw   B'00110000'
01B5   00A4               M             movwf   dat
01B6   2???               M             call WR_DATA
01B7   2???           00408     call            Switch_Lines
                      00409     Display         Defective
  0000                    M                 local   loop_
  0000                    M                 local   end_
01B8   01A2               M                 clrf    Table_Counter
01B9   0103               M                 clrw
01BA   0822               M loop_   movf    Table_Counter,W
01BB   2???               M                 call    Defective
01BC   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01BD   1903               M                 btfsc   STATUS,Z
01BE   2???               M                 goto    end_
01BF   2???               M                 call    WR_DATA
01C0   0AA2               M                 incf    Table_Counter,F
01C1   2???               M                 goto    loop_
01C2                      M end_
                      00410     writenum_reg    num_def
01C2   0839               M             movfw    num_def
01C3   3E30               M             addlw   B'00110000'
01C4   00A4               M             movwf   dat
01C5   2???               M             call WR_DATA
01C6   0008           00411     return
                      00412 
                      00413 ; Defective candles Subroutine
01C7                  00414 defective
01C7   2???           00415     call            Clear_Display
                      00416     Display         Defective
  0000                    M                 local   loop_
  0000                    M                 local   end_
01C8   01A2               M                 clrf    Table_Counter
01C9   0103               M                 clrw
01CA   0822               M loop_   movf    Table_Counter,W
01CB   2???               M                 call    Defective
01CC   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01CD   1903               M                 btfsc   STATUS,Z
01CE   2???               M                 goto    end_
01CF   2???               M                 call    WR_DATA
01D0   0AA2               M                 incf    Table_Counter,F
01D1   2???               M                 goto    loop_
01D2                      M end_
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01D2   2???           00417     call            Switch_Lines
01D3   08B9           00418     movf            num_def, F
01D4   1D03           00419     btfss           STATUS,Z         ;if none defective, just say "none"
01D5   2???           00420     goto            one
                      00421     Display         None
  0000                    M                 local   loop_
  0000                    M                 local   end_
01D6   01A2               M                 clrf    Table_Counter
01D7   0103               M                 clrw
01D8   0822               M loop_   movf    Table_Counter,W
01D9   2???               M                 call    None
01DA   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01DB   1903               M                 btfsc   STATUS,Z
01DC   2???               M                 goto    end_
01DD   2???               M                 call    WR_DATA
01DE   0AA2               M                 incf    Table_Counter,F
01DF   2???               M                 goto    loop_
01E0                      M end_
01E0   0008           00422     return
01E1                  00423 one
01E1   1CB0           00424    btfss           status1, 1          ;defective if status is 10 or 11
01E2   2???           00425     goto            two
                      00426     writenum        0x1
01E3   3001               M             movlw    0x1
01E4   3E30               M             addlw   B'00110000'
01E5   00A4               M             movwf   dat
01E6   2???               M             call WR_DATA
                      00427     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
01E7   01A2               M                 clrf    Table_Counter
01E8   0103               M                 clrw
01E9   0822               M loop_   movf    Table_Counter,W
01EA   2???               M                 call    Spacebar
01EB   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01EC   1903               M                 btfsc   STATUS,Z
01ED   2???               M                 goto    end_
01EE   2???               M                 call    WR_DATA
01EF   0AA2               M                 incf    Table_Counter,F
01F0   2???               M                 goto    loop_
01F1                      M end_
01F1                  00428 two
01F1   1CB1           00429     btfss           status2, 1          ;defective if status is 10 or 11
01F2   2???           00430     goto            three
                      00431     writenum        0x2
01F3   3002               M             movlw    0x2
01F4   3E30               M             addlw   B'00110000'
01F5   00A4               M             movwf   dat
01F6   2???               M             call WR_DATA
                      00432     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
01F7   01A2               M                 clrf    Table_Counter
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

01F8   0103               M                 clrw
01F9   0822               M loop_   movf    Table_Counter,W
01FA   2???               M                 call    Spacebar
01FB   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
01FC   1903               M                 btfsc   STATUS,Z
01FD   2???               M                 goto    end_
01FE   2???               M                 call    WR_DATA
01FF   0AA2               M                 incf    Table_Counter,F
0200   2???               M                 goto    loop_
0201                      M end_
0201                  00433 three
0201   1CB2           00434     btfss           status3, 1          ;defective if status is 10 or 11
0202   2???           00435     goto            four
                      00436     writenum        0x3
0203   3003               M             movlw    0x3
0204   3E30               M             addlw   B'00110000'
0205   00A4               M             movwf   dat
0206   2???               M             call WR_DATA
                      00437     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0207   01A2               M                 clrf    Table_Counter
0208   0103               M                 clrw
0209   0822               M loop_   movf    Table_Counter,W
020A   2???               M                 call    Spacebar
020B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
020C   1903               M                 btfsc   STATUS,Z
020D   2???               M                 goto    end_
020E   2???               M                 call    WR_DATA
020F   0AA2               M                 incf    Table_Counter,F
0210   2???               M                 goto    loop_
0211                      M end_
0211                  00438 four
0211   1CB3           00439     btfss           status4, 1          ;defective if status is 10 or 11
0212   2???           00440     goto            five
                      00441     writenum        0x4
0213   3004               M             movlw    0x4
0214   3E30               M             addlw   B'00110000'
0215   00A4               M             movwf   dat
0216   2???               M             call WR_DATA
                      00442     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0217   01A2               M                 clrf    Table_Counter
0218   0103               M                 clrw
0219   0822               M loop_   movf    Table_Counter,W
021A   2???               M                 call    Spacebar
021B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
021C   1903               M                 btfsc   STATUS,Z
021D   2???               M                 goto    end_
021E   2???               M                 call    WR_DATA
021F   0AA2               M                 incf    Table_Counter,F
0220   2???               M                 goto    loop_
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0221                      M end_
0221                  00443 five
0221   1CB4           00444     btfss           status5, 1          ;defective if status is 10 or 11
0222   2???           00445     goto            six
                      00446     writenum        0x5
0223   3005               M             movlw    0x5
0224   3E30               M             addlw   B'00110000'
0225   00A4               M             movwf   dat
0226   2???               M             call WR_DATA
                      00447     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0227   01A2               M                 clrf    Table_Counter
0228   0103               M                 clrw
0229   0822               M loop_   movf    Table_Counter,W
022A   2???               M                 call    Spacebar
022B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
022C   1903               M                 btfsc   STATUS,Z
022D   2???               M                 goto    end_
022E   2???               M                 call    WR_DATA
022F   0AA2               M                 incf    Table_Counter,F
0230   2???               M                 goto    loop_
0231                      M end_
0231                  00448 six
0231   1CB5           00449     btfss           status6, 1          ;defective if status is 10 or 11
0232   2???           00450     goto            seven
                      00451     writenum        0x6
0233   3006               M             movlw    0x6
0234   3E30               M             addlw   B'00110000'
0235   00A4               M             movwf   dat
0236   2???               M             call WR_DATA
                      00452     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0237   01A2               M                 clrf    Table_Counter
0238   0103               M                 clrw
0239   0822               M loop_   movf    Table_Counter,W
023A   2???               M                 call    Spacebar
023B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
023C   1903               M                 btfsc   STATUS,Z
023D   2???               M                 goto    end_
023E   2???               M                 call    WR_DATA
023F   0AA2               M                 incf    Table_Counter,F
0240   2???               M                 goto    loop_
0241                      M end_
0241                  00453 seven
0241   1CB6           00454     btfss           status7, 1          ;defective if status is 10 or 11
0242   2???           00455     goto            eight
                      00456     writenum        0x7
0243   3007               M             movlw    0x7
0244   3E30               M             addlw   B'00110000'
0245   00A4               M             movwf   dat
0246   2???               M             call WR_DATA
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 16


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00457     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0247   01A2               M                 clrf    Table_Counter
0248   0103               M                 clrw
0249   0822               M loop_   movf    Table_Counter,W
024A   2???               M                 call    Spacebar
024B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
024C   1903               M                 btfsc   STATUS,Z
024D   2???               M                 goto    end_
024E   2???               M                 call    WR_DATA
024F   0AA2               M                 incf    Table_Counter,F
0250   2???               M                 goto    loop_
0251                      M end_
0251                  00458 eight
0251   1CB7           00459     btfss           status8, 1          ;defective if status is 10 or 11
0252   2???           00460     goto            nine
                      00461     writenum        0x8
0253   3008               M             movlw    0x8
0254   3E30               M             addlw   B'00110000'
0255   00A4               M             movwf   dat
0256   2???               M             call WR_DATA
                      00462     Display         Spacebar
  0000                    M                 local   loop_
  0000                    M                 local   end_
0257   01A2               M                 clrf    Table_Counter
0258   0103               M                 clrw
0259   0822               M loop_   movf    Table_Counter,W
025A   2???               M                 call    Spacebar
025B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
025C   1903               M                 btfsc   STATUS,Z
025D   2???               M                 goto    end_
025E   2???               M                 call    WR_DATA
025F   0AA2               M                 incf    Table_Counter,F
0260   2???               M                 goto    loop_
0261                      M end_
0261                  00463 nine
0261   1CB8           00464     btfss           status9, 1          ;defective if status is 10 or 11
0262   2???           00465     goto            end_defective
                      00466     writenum        0x9
0263   3009               M             movlw    0x9
0264   3E30               M             addlw   B'00110000'
0265   00A4               M             movwf   dat
0266   2???               M             call WR_DATA
0267                  00467 end_defective
0267   0008           00468     return
                      00469 
                      00470 ; Time subroutine
0268                  00471 time
0268   2???           00472     call Clear_Display
                      00473     Display Time_Msg
  0000                    M                 local   loop_
  0000                    M                 local   end_
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 17


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0269   01A2               M                 clrf    Table_Counter
026A   0103               M                 clrw
026B   0822               M loop_   movf    Table_Counter,W
026C   2???               M                 call    Time_Msg
026D   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
026E   1903               M                 btfsc   STATUS,Z
026F   2???               M                 goto    end_
0270   2???               M                 call    WR_DATA
0271   0AA2               M                 incf    Table_Counter,F
0272   2???               M                 goto    loop_
0273                      M end_
0273   2???           00474     call Switch_Lines
0274   082F           00475     movf    op_time, W
0275   2???           00476     call    big_number
0276   082B           00477     movf    huns, W
0277   1903           00478     btfsc   STATUS,Z    ;if huns is zero don't display it
0278   2???           00479     goto    no_huns
                      00480     writenum_reg    huns
0279   082B               M             movfw    huns
027A   3E30               M             addlw   B'00110000'
027B   00A4               M             movwf   dat
027C   2???               M             call WR_DATA
027D                  00481 no_huns
027D   082C           00482     movf    tens, W
027E   1903           00483     btfsc   STATUS,Z    ;if tens is zero don't display it
027F   2???           00484     goto    no_tens
                      00485     writenum_reg    tens
0280   082C               M             movfw    tens
0281   3E30               M             addlw   B'00110000'
0282   00A4               M             movwf   dat
0283   2???               M             call WR_DATA
0284                  00486 no_tens
                      00487     writenum_reg    ones
0284   082D               M             movfw    ones
0285   3E30               M             addlw   B'00110000'
0286   00A4               M             movwf   dat
0287   2???               M             call WR_DATA
                      00488     Display Seconds
  0000                    M                 local   loop_
  0000                    M                 local   end_
0288   01A2               M                 clrf    Table_Counter
0289   0103               M                 clrw
028A   0822               M loop_   movf    Table_Counter,W
028B   2???               M                 call    Seconds
028C   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
028D   1903               M                 btfsc   STATUS,Z
028E   2???               M                 goto    end_
028F   2???               M                 call    WR_DATA
0290   0AA2               M                 incf    Table_Counter,F
0291   2???               M                 goto    loop_
0292                      M end_
0292   0008           00489     return
                      00490 
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 18


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00491 
                      00492 ;***************************************
                      00493 ; STATUS SLECECTOR ROUTINE (written by me)
                      00494 ;***************************************
0293                  00495 display_status
0293   00A1           00496     movwf  statustemp
                      00497 
0294                  00498 check_none
0294   3A00           00499     xorlw   0x0
0295   1D03           00500     btfss   STATUS,Z
0296   2???           00501     goto check_pass
                      00502     Display Not_present
  0000                    M                 local   loop_
  0000                    M                 local   end_
0297   01A2               M                 clrf    Table_Counter
0298   0103               M                 clrw
0299   0822               M loop_   movf    Table_Counter,W
029A   2???               M                 call    Not_present
029B   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
029C   1903               M                 btfsc   STATUS,Z
029D   2???               M                 goto    end_
029E   2???               M                 call    WR_DATA
029F   0AA2               M                 incf    Table_Counter,F
02A0   2???               M                 goto    loop_
02A1                      M end_
02A1   0008           00503     return
                      00504 
02A2                  00505 check_pass
02A2   0821           00506     movf    statustemp, W
02A3   3A01           00507     xorlw   0x1
02A4   1D03           00508     btfss   STATUS,Z
02A5   2???           00509     goto check_LED
                      00510     Display Pass
  0000                    M                 local   loop_
  0000                    M                 local   end_
02A6   01A2               M                 clrf    Table_Counter
02A7   0103               M                 clrw
02A8   0822               M loop_   movf    Table_Counter,W
02A9   2???               M                 call    Pass
02AA   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
02AB   1903               M                 btfsc   STATUS,Z
02AC   2???               M                 goto    end_
02AD   2???               M                 call    WR_DATA
02AE   0AA2               M                 incf    Table_Counter,F
02AF   2???               M                 goto    loop_
02B0                      M end_
02B0   0008           00511     return
                      00512 
02B1                  00513 check_LED
02B1   0821           00514     movf    statustemp, W
02B2   3A02           00515     xorlw   0x2
02B3   1D03           00516     btfss   STATUS,Z
02B4   2???           00517     goto check_flick
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 19


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

                      00518     Display LED_fail
  0000                    M                 local   loop_
  0000                    M                 local   end_
02B5   01A2               M                 clrf    Table_Counter
02B6   0103               M                 clrw
02B7   0822               M loop_   movf    Table_Counter,W
02B8   2???               M                 call    LED_fail
02B9   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
02BA   1903               M                 btfsc   STATUS,Z
02BB   2???               M                 goto    end_
02BC   2???               M                 call    WR_DATA
02BD   0AA2               M                 incf    Table_Counter,F
02BE   2???               M                 goto    loop_
02BF                      M end_
02BF   0008           00519     return
                      00520 
02C0                  00521 check_flick
02C0   0821           00522     movf    statustemp, W
02C1   3A03           00523     xorlw   0x3
02C2   1D03           00524     btfss   STATUS,Z
02C3   2???           00525     goto default_status
                      00526     Display Flick_fail
  0000                    M                 local   loop_
  0000                    M                 local   end_
02C4   01A2               M                 clrf    Table_Counter
02C5   0103               M                 clrw
02C6   0822               M loop_   movf    Table_Counter,W
02C7   2???               M                 call    Flick_fail
02C8   3A00               M                 xorlw   B'00000000' ;check WORK reg to see if 0 is returned
02C9   1903               M                 btfsc   STATUS,Z
02CA   2???               M                 goto    end_
02CB   2???               M                 call    WR_DATA
02CC   0AA2               M                 incf    Table_Counter,F
02CD   2???               M                 goto    loop_
02CE                      M end_
02CE   0008           00527     return
                      00528 
02CF                  00529 default_status
02CF   0008           00530     return
                      00531 
                      00532 ;***************************************
                      00533 ; DISPLAY BIG NUMBER ROUTINE
                      00534 ; modified from http://www.piclist.com/techref/microchip/math/radix/b2a-8b3d-ab.htm
                      00535 ;***************************************
                      00536 
02D0                  00537 big_number      
                      00538     movff   op_time, op_time_save         ;save the original op_time
02D0   082F               M         movf    op_time, W
02D1   00AA               M         movwf   op_time_save
                      00539 
02D2   3008           00540     movlw 8
02D3   00AE           00541     movwf count
02D4   01AB           00542     clrf huns
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 20


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02D5   01AC           00543     clrf tens
02D6   01AD           00544     clrf ones
                      00545 
02D7                  00546 BCDADD3
02D7   3005           00547     movlw 5
02D8   022B           00548     subwf huns, 0
02D9   1803           00549     btfsc STATUS, C
                      00550 
02DA   2???           00551     CALL ADD3HUNS
02DB   3005           00552     movlw 5
02DC   022C           00553     subwf tens, 0
02DD   1803           00554     btfsc STATUS, C
02DE   2???           00555     CALL ADD3TENS
                      00556 
02DF   3005           00557     movlw 5
02E0   022D           00558     subwf ones, 0
02E1   1803           00559     btfsc STATUS, C
02E2   2???           00560     CALL ADD3ONES
                      00561 
02E3   03AE           00562     decf count, 1
02E4   1003           00563     bcf STATUS, C
02E5   0DAF           00564     rlf op_time, 1
02E6   0DAD           00565     rlf ones, 1
02E7   1A2D           00566     btfsc ones,4 ;
02E8   2???           00567     CALL CARRYONES
02E9   0DAC           00568     rlf tens, 1
                      00569 
02EA   1A2C           00570     btfsc tens,4 ;
02EB   2???           00571     CALL CARRYTENS
02EC   0DAB           00572     rlf huns,1
02ED   1003           00573     bcf STATUS, C
                      00574 
02EE   082E           00575     movf count, 0
02EF   1D03           00576     btfss STATUS, Z
02F0   2???           00577     GOTO BCDADD3
                      00578 
                      00579     movff    op_time_save, op_time     ;restore the original op_time
02F1   082A               M         movf    op_time_save, W
02F2   00AF               M         movwf   op_time
                      00580 
02F3   0008           00581     RETURN
                      00582 
02F4                  00583 ADD3HUNS
02F4   3003           00584     movlw 3
02F5   07AB           00585     addwf huns,1
02F6   0008           00586     RETURN
                      00587 
02F7                  00588 ADD3TENS
02F7   3003           00589     movlw 3
02F8   07AC           00590     addwf tens,1
02F9   0008           00591     RETURN
                      00592 
02FA                  00593 ADD3ONES
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 21


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

02FA   3003           00594     movlw 3
02FB   07AD           00595     addwf ones,1
02FC   0008           00596     RETURN
                      00597 
02FD                  00598 CARRYONES
02FD   122D           00599     bcf ones, 4
02FE   1403           00600     bsf STATUS, C
02FF   0008           00601     RETURN
                      00602 
0300                  00603 CARRYTENS
0300   122C           00604     bcf tens, 4
0301   1403           00605     bsf STATUS, C
0302   0008           00606     RETURN
                      00607     
                      00608 
                      00609 ;***************************************
                      00610 ; DISPLAY ROUTINES (copied from sample code)
                      00611 ;***************************************
                      00612 
0303                  00613 InitLCD
0303   1283           00614         bcf STATUS,RP0
0304   1588           00615         bsf E     ;E default high
                      00616 
                      00617         ;Wait for LCD POR to finish (~15ms)
0305   2???           00618         call lcdLongDelay
0306   2???           00619         call lcdLongDelay
0307   2???           00620         call lcdLongDelay
                      00621 
                      00622         ;Ensure 8-bit mode first (no way to immediately guarantee 4-bit mode)
                      00623         ; -> Send b'0011' 3 times
0308   3033           00624         movlw   b'00110011'
0309   2???           00625         call    WR_INS
030A   2???           00626         call lcdLongDelay
030B   2???           00627         call lcdLongDelay
030C   3032           00628         movlw   b'00110010'
030D   2???           00629         call    WR_INS
030E   2???           00630         call lcdLongDelay
030F   2???           00631         call lcdLongDelay
                      00632 
                      00633         ; 4 bits, 2 lines, 5x7 dots
0310   3028           00634         movlw   b'00101000'
0311   2???           00635         call    WR_INS
0312   2???           00636         call lcdLongDelay
0313   2???           00637         call lcdLongDelay
                      00638 
                      00639         ; display on/off
0314   300C           00640         movlw   b'00001100'
0315   2???           00641         call    WR_INS
0316   2???           00642         call lcdLongDelay
0317   2???           00643         call lcdLongDelay
                      00644 
                      00645         ; Entry mode
0318   3006           00646         movlw   b'00000110'
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 22


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0319   2???           00647         call    WR_INS
031A   2???           00648         call lcdLongDelay
031B   2???           00649         call lcdLongDelay
                      00650 
                      00651         ; Clear ram
031C   3001           00652         movlw   b'00000001'
031D   2???           00653         call    WR_INS
031E   2???           00654         call lcdLongDelay
031F   2???           00655         call lcdLongDelay
0320   0008           00656         return
                      00657 
                      00658 
0321                  00659 Clear_Display
0321   3001           00660                 movlw   B'00000001'
0322   2???           00661                 call    WR_INS
0323   0008           00662                 return
                      00663 
0324                  00664 Switch_Lines
0324   30C0           00665                 movlw   B'11000000'
0325   2???           00666                 call    WR_INS
0326   0008           00667                 return
                      00668 
0327                  00669 WR_INS
0327   1108           00670         bcf             RS                              ;clear RS
0328   00A3           00671         movwf   com                             ;W --> com
0329   39F0           00672         andlw   0xF0                    ;mask 4 bits MSB w = X0
032A   0088           00673         movwf   PORTD                   ;Send 4 bits MSB
032B   1588           00674         bsf             E                               ;
032C   2???           00675         call    lcdLongDelay    ;__    __
032D   1188           00676         bcf             E                               ;  |__|
032E   0E23           00677         swapf   com,w
032F   39F0           00678         andlw   0xF0                    ;1111 0010
0330   0088           00679         movwf   PORTD                   ;send 4 bits LSB
0331   1588           00680         bsf             E                               ;
0332   2???           00681         call    lcdLongDelay    ;__    __
0333   1188           00682         bcf             E                               ;  |__|
0334   2???           00683         call    lcdLongDelay
0335   0008           00684         return
                      00685 
                      00686 
0336                  00687 WR_DATA
0336   1508           00688         bsf             RS
0337   00A4           00689         movwf   dat
0338   0824           00690         movf    dat,w
0339   39F0           00691         andlw   0xF0
033A   3E04           00692         addlw   4
033B   0088           00693         movwf   PORTD
033C   1588           00694         bsf             E                               ;
033D   2???           00695         call    lcdLongDelay    ;__    __
033E   1188           00696         bcf             E                               ;  |__|
033F   0E24           00697         swapf   dat,w
0340   39F0           00698         andlw   0xF0
0341   3E04           00699         addlw   4
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 23


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE

0342   0088           00700         movwf   PORTD
0343   1588           00701         bsf             E                               ;
0344   2???           00702         call    lcdLongDelay    ;__    __
0345   1188           00703         bcf             E                               ;  |__|
0346   0008           00704         return
                      00705 
0347                  00706 lcdLongDelay
0347   3014           00707     movlw d'20'
0348   00A6           00708     movwf lcd_d2
0349                  00709 LLD_LOOP
                      00710     LCD_DELAY
0349   30FF               M         movlw   0xFF
034A   00A5               M         movwf   lcd_d1
034B   0BA5               M         decfsz  lcd_d1,f
034C   2???               M         goto    $-1
034D   0BA6           00711     decfsz lcd_d2,f
034E   2???           00712     goto LLD_LOOP
034F   0008           00713     return
                      00714 
                      00715     
                      00716 
                      00717 
                      00718 ;***************************************
                      00719 ; Delay 0.5s
                      00720 ;***************************************
0350                  00721 HalfS
  0000                00722         local   HalfS_0
0350   3088           00723       movlw 0x88
0351   00A7           00724       movwf COUNTH
0352   30BD           00725       movlw 0xBD
0353   00A8           00726       movwf COUNTM
0354   3003           00727       movlw 0x03
0355   00A9           00728       movwf COUNTL
                      00729 
0356                  00730 HalfS_0
0356   0BA7           00731       decfsz COUNTH, f
0357   2???           00732       goto   $+2
0358   0BA8           00733       decfsz COUNTM, f
0359   2???           00734       goto   $+2
035A   0BA9           00735       decfsz COUNTL, f
035B   2???           00736       goto   HalfS_0
                      00737 
035C   2???           00738       goto $+1
035D   0000           00739       nop
035E   0000           00740       nop
035F   0008           00741                 return
                      00742 
3F72                  00743     END
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 24


SYMBOL TABLE
  LABEL                             VALUE 

ACKDT                             00000005
ACKEN                             00000004
ACKSTAT                           00000006
ADCON0                            0000001F
ADCON1                            0000009F
ADCS0                             00000006
ADCS1                             00000007
ADD3HUNS                          000002F4
ADD3ONES                          000002FA
ADD3TENS                          000002F7
ADDEN                             00000003
ADFM                              00000007
ADIE                              00000006
ADIF                              00000006
ADON                              00000000
ADRESH                            0000001E
ADRESL                            0000009E
BCDADD3                           000002D7
BCLIE                             00000003
BCLIF                             00000003
BF                                00000000
BRGH                              00000002
C                                 00000000
CARRYONES                         000002FD
CARRYTENS                         00000300
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCP2CON                           0000001D
CCP2IE                            00000000
CCP2IF                            00000000
CCP2M0                            00000000
CCP2M1                            00000001
CCP2M2                            00000002
CCP2M3                            00000003
CCP2X                             00000005
CCP2Y                             00000004
CCPR1                             00000015
CCPR1H                            00000016
CCPR1L                            00000015
CCPR2                             0000001B
CCPR2H                            0000001C
CCPR2L                            0000001B
CHS0                              00000003
CHS1                              00000004
CHS2                              00000005
CKE                               00000006
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 25


SYMBOL TABLE
  LABEL                             VALUE 

CKP                               00000004
COUNTH                            00000027
COUNTL                            00000029
COUNTM                            00000028
CREN                              00000004
CSRC                              00000007
Clear_Display                     00000321
D                                 00000005
DATA_ADDRESS                      00000005
DC                                00000001
D_A                               00000005
D_NOT_A                           00000005
Defective                         00000085
Display                           
E                                 PORTD,3
EEADR                             0000010D
EEADRH                            0000010F
EECON1                            0000018C
EECON2                            0000018D
EEDATA                            0000010C
EEDATH                            0000010E
EEIE                              00000004
EEIF                              00000004
EEPGD                             00000007
End_Msg                           0000001C
F                                 00000001
FERR                              00000002
FSR                               00000004
Flick_fail                        00000064
GCEN                              00000007
GIE                               00000007
GO                                00000002
GO_DONE                           00000002
GO_NOT_DONE                       00000002
HalfS                             00000350
I2C_DATA                          00000005
I2C_READ                          00000002
I2C_START                         00000003
I2C_STOP                          00000004
IBF                               00000007
IBOV                              00000005
INDF                              00000000
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
InitLCD                           00000303
LCD_DELAY                         
LED_fail                          00000058
LLD_LOOP                          00000349
NOT_A                             00000005
NOT_ADDRESS                       00000005
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 26


SYMBOL TABLE
  LABEL                             VALUE 

NOT_BO                            00000000
NOT_BOR                           00000000
NOT_DONE                          00000002
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_RC8                           00000006
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOT_TX8                           00000006
NOT_W                             00000002
NOT_WRITE                         00000002
None                              00000092
Not_present                       00000041
OBF                               00000006
OERR                              00000001
OPTION_REG                        00000081
P                                 00000004
PCFG0                             00000000
PCFG1                             00000001
PCFG2                             00000002
PCFG3                             00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PEN                               00000002
PIE1                              0000008C
PIE2                              0000008D
PIR1                              0000000C
PIR2                              0000000D
PORTA                             00000005
PORTB                             00000006
PORTC                             00000007
PORTD                             00000008
PORTE                             00000009
PR2                               00000092
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
PSPIE                             00000007
PSPIF                             00000007
PSPMODE                           00000004
Pass                              00000050
R                                 00000002
RA0                               00000000
RA1                               00000001
RA2                               00000002
RA3                               00000003
RA4                               00000004
RA5                               00000005
RB0                               00000000
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 27


SYMBOL TABLE
  LABEL                             VALUE 

RB1                               00000001
RB2                               00000002
RB3                               00000003
RB4                               00000004
RB5                               00000005
RB6                               00000006
RB7                               00000007
RBIE                              00000003
RBIF                              00000000
RC0                               00000000
RC1                               00000001
RC2                               00000002
RC3                               00000003
RC4                               00000004
RC5                               00000005
RC6                               00000006
RC7                               00000007
RC8_9                             00000006
RC9                               00000006
RCD8                              00000000
RCEN                              00000003
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RD0                               00000000
RD1                               00000001
RD2                               00000002
RD3                               00000003
RD4                               00000004
RD5                               00000005
RD6                               00000006
RD7                               00000007
RE0                               00000000
RE1                               00000001
RE2                               00000002
READ_WRITE                        00000002
RP0                               00000005
RP1                               00000006
RS                                PORTD,2
RSEN                              00000001
RX9                               00000006
RX9D                              00000000
R_NOT_W                           00000002
R_W                               00000002
S                                 00000003
SEN                               00000000
SMP                               00000007
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
SSPADD                            00000093
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 28


SYMBOL TABLE
  LABEL                             VALUE 

SSPBUF                            00000013
SSPCON                            00000014
SSPCON2                           00000091
SSPEN                             00000005
SSPIE                             00000003
SSPIF                             00000003
SSPM0                             00000000
SSPM1                             00000001
SSPM2                             00000002
SSPM3                             00000003
SSPOV                             00000006
SSPSTAT                           00000094
STATUS                            00000003
SYNC                              00000004
Seconds                           00000037
Spacebar                          0000009E
Standby_Msg                       00000001
Start_Msg                         0000000A
Switch_Lines                      00000324
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1INSYNC                          00000002
T1OSCEN                           00000003
T1SYNC                            00000002
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TMR0                              00000001
TMR0IE                            00000005
TMR0IF                            00000002
TMR1                              0000000E
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISA0                            00000000
TRISA1                            00000001
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 29


SYMBOL TABLE
  LABEL                             VALUE 

TRISA2                            00000002
TRISA3                            00000003
TRISA4                            00000004
TRISA5                            00000005
TRISB                             00000086
TRISB0                            00000000
TRISB1                            00000001
TRISB2                            00000002
TRISB3                            00000003
TRISB4                            00000004
TRISB5                            00000005
TRISB6                            00000006
TRISB7                            00000007
TRISC                             00000087
TRISC0                            00000000
TRISC1                            00000001
TRISC2                            00000002
TRISC3                            00000003
TRISC4                            00000004
TRISC5                            00000005
TRISC6                            00000006
TRISC7                            00000007
TRISD                             00000088
TRISD0                            00000000
TRISD1                            00000001
TRISD2                            00000002
TRISD3                            00000003
TRISD4                            00000004
TRISD5                            00000005
TRISD6                            00000006
TRISD7                            00000007
TRISE                             00000089
TRISE0                            00000000
TRISE1                            00000001
TRISE2                            00000002
TRMT                              00000001
TX8_9                             00000006
TX9                               00000006
TX9D                              00000000
TXD8                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
Table_Counter                     00000022
Time_Msg                          00000026
Total_Msg                         00000074
UA                                00000001
W                                 00000000
WCOL                              00000007
WR                                00000001
WREN                              00000002
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 30


SYMBOL TABLE
  LABEL                             VALUE 

WRERR                             00000003
WR_DATA                           00000336
WR_INS                            00000327
Z                                 00000002
_.org_0_00B9                      000000B9
_.org_0_00C0                      000000C0
_.org_0_0118                      00000118
_.org_0_011D                      0000011D
_.org_0_034C                      0000034C
_.org_0_0357                      00000357
_.org_0_0359                      00000359
_.org_0_035C                      0000035C
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_BOREN_OFF                        00003FBF
_BOREN_ON                         00003FFF
_CONFIG                           00002007
_CPD_OFF                          00003FFF
_CPD_ON                           00003EFF
_CP_ALL                           00000FCF
_CP_HALF                          00001FDF
_CP_OFF                           00003FFF
_CP_UPPER_256                     00002FEF
_DEBUG_OFF                        00003FFF
_DEBUG_ON                         000037FF
_DEVID1                           00002006
_FOSC_EXTRC                       00003FFF
_FOSC_HS                          00003FFE
_FOSC_LP                          00003FFC
_FOSC_XT                          00003FFD
_HS_OSC                           00003FFE
_IDLOC0                           00002000
_IDLOC1                           00002001
_IDLOC2                           00002002
_IDLOC3                           00002003
_LP_OSC                           00003FFC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_RC_OSC                           00003FFF
_WDTE_OFF                         00003FFB
_WDTE_ON                          00003FFF
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_WRT_ENABLE_OFF                   00003DFF
_WRT_ENABLE_ON                    00003FFF
_WRT_OFF                          00003DFF
_WRT_ON                           00003FFF
_XT_OSC                           00003FFD
__16F877                          00000001
big_number                        000002D0
check_1                           00000120
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 31


SYMBOL TABLE
  LABEL                             VALUE 

check_2                           0000012B
check_3                           00000137
check_4                           00000143
check_5                           0000014F
check_6                           0000015B
check_7                           00000167
check_8                           00000173
check_9                           0000017F
check_LED                         000002B1
check_defective                   00000191
check_flick                       000002C0
check_none                        00000294
check_pass                        000002A2
check_standby                     000001A2
check_start                       0000019D
check_summary                     0000018B
check_time                        00000197
com                               00000023
count                             0000002E
dat                               00000024
default_key                       000001A7
default_status                    000002CF
defective                         000001C7
display_status                    00000293
eight                             00000251
end_defective                     00000267
five                              00000221
four                              00000211
huns                              0000002B
information                       0000011F
init                              000000A1
keytemp                           00000020
lcdLongDelay                      00000347
lcd_d1                            00000025
lcd_d2                            00000026
movff                             
movlf                             
nine                              00000261
no_huns                           0000027D
no_tens                           00000284
num_def                           00000039
num_tot                           0000003A
one                               000001E1
ones                              0000002D
op_time                           0000002F
op_time_save                      0000002A
poll                              00000117
seven                             00000241
six                               00000231
start                             000000C2
status1                           00000030
status2                           00000031
status3                           00000032
MPASM 5.54                     INTERFACE.ASM   1-30-2014  0:53:47         PAGE 32


SYMBOL TABLE
  LABEL                             VALUE 

status4                           00000033
status5                           00000034
status6                           00000035
status7                           00000036
status8                           00000037
status9                           00000038
statustemp                        00000021
summary                           000001A8
tens                              0000002C
three                             00000201
time                              00000268
two                               000001F1
waiting                           000000B8
writenum                          
writenum_reg                      

Errors   :     0
Warnings :     0 reported,     0 suppressed
Messages :     4 reported,     0 suppressed

